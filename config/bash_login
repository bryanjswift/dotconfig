###### Prompt Setup ######
function get_git_branch {
  git branch | awk '/^\*/ { print substr($0, 3, (length - 2)) }'
}
function get_git_dirty {
  [[ 0 -eq `git status --porcelain | wc -l` ]] || echo "*"
}
function get_git_prompt {
  git branch &> /dev/null || return 1
  echo "[$(get_git_branch)$(get_git_dirty)]"
}
 
function gitPrompt {
	PS1="\[\033[1;35m\](\t)\[\033[00m\] \u@\h\[\033[0;33m\] \w\[\033[00m\]\$(get_git_prompt): "
	PS2='> '
	PS4='+ '
}
gitPrompt

###### Command Line ######
set -o vi

###### Environment Variables ######
# Dotconfig Home
export DOTCONFIG=$HOME/Documents/code/dotconfig
# In bash history: ignore duplicates, `ls`, `bg`, `fg`, `exit` commands
export HISTIGNORE="&:ls:[bf]g:exit"
# environment variables for JVM development
export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64
export M2_REPOSITORY=$HOME/.m2/repository
export ANT_HOME=$HOME/Documents/src/java/apache-ant-1.8.3
export CLOJURE_EXT=$HOME/Documents/src/clojure/clojure-classpath
export GAE_SDK=$HOME/Documents/src/gae/appengine-java-sdk-1.3.3
export REBEL_HOME=$HOME/Documents/src/java/jrebel
# Ruby
export RBENV=$HOME/.rbenv
# catalog files for compiling man pages
export XML_CATALOG_FILES="/opt/local/share/xml/docbook/4.2/catalog.xml /opt/local/share/xsl/docbook-xsl/catalog.xml"
# Source Control variables
export SVN_EDITOR=vim
export VISUAL=vim

###### Aliases ######
alias regex='java -classpath $HOME/Documents/code/java/javaregexdemo/classes/ regexdemo.AppRegexDemo'
alias trash='trash'
alias appcfg='$GAE_SDK/bin/appcfg.sh'
alias dev_appserver='$GAE_SDK/bin/dev_appserver.sh'
alias closure-compiler='java -jar $HOME/Documents/src/java/closure-compiler/compiler.jar'
alias packager='$HOME/Documents/code/mootools/packager/packager'
alias iaw='open -a/Applications/iA\ Writer.app'

###### Path ######
export ORIG_PATH=$PATH
# add to the path
export PATH=/usr/local/bin:/usr/local/sbin:/usr/local/share/npm/bin:$RBENV/bin:$ANT_HOME/bin:$RBENV/bin:$PATH
# where to find compiled man pages
export MANPATH=/usr/local/man:$MANPATH

###### rbenv ######
eval "$(rbenv init -)"

[[ -s "$DOTCONFIG/scripts/na.sh" ]] && source "$DOTCONFIG/scripts/na.sh"
