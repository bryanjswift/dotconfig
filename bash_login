###### Prompt Setup ######
function parse_git_branch {
  git branch --no-color 2> /dev/null | sed -e "/^[^*]/d" -e "s/* \(.*\)/[\1$(parse_git_dirty)]/"
}
function parse_git_dirty {
  [[ $(git status 2> /dev/null | tail -n1) != "nothing to commit (working directory clean)" ]] && echo "*"
}
 
function gitPrompt {
	PS1="\u@\h\[\033[0;33m\] \W\[\033[00m\]\$(parse_git_branch): "
	PS2='> '
	PS4='+ '
}
gitPrompt

###### Command Line ######
set -o vi

###### Environment Variables ######
# environment variables for Java development
export JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk
export JDK_HOME=$JAVA_HOME
export SCALA_HOME=/usr/share/scala/current
#export MAVEN_HOME=$HOME/Documents/src/java/apache-maven-2.2.1
#export M2_REPOSITORY=$HOME/.m2/repository
#export ANT_HOME=$HOME/Documents/src/java/apache-ant-1.7.1
#export CLOJURE_EXT=$HOME/Documents/src/clojure/clojure-classpath
# EC2 environment variables
export EC2_HOME=$HOME/.ec2
export EC2_PRIVATE_KEY=`ls $EC2_HOME/pk-*.pem`
export EC2_CERT=`ls $EC2_HOME/cert-*.pem`
export EC2_USER_ID=`cat $EC2_HOME/user.id`
export EC2_ACCESS=`cat $EC2_HOME/access.key`
export EC2_SECRET=`cat $EC2_HOME/secret.key`

alias bundle-image="sudo ec2-bundle-vol -d /mnt -u $EC2_USER_ID -k $EC2_PRIVATE_KEY -c $EC2_CERT -p "
alias upload-image="sudo ec2-upload-bundle -b bryanjswift.servers -a $EC2_ACCESS -s $EC2_SECRET -m "

# svn variables
export SVN_EDITOR=vim
export VISUAL=vim

###### Aliases ######
alias free="free -m"
alias update="sudo aptitude update"
alias install="sudo aptitude install"
alias upgrade="sudo aptitude safe-upgrade"
alias remove="sudo aptitude remove"

###### Path ######
# add /usr/local/bin to the path
export PATH=/usr/local/bin:$PATH
# add maven to the path
export PATH=$MAVEN_HOME/bin:$PATH
# add ant to the path
export PATH=$ANT_HOME/bin:$PATH
# add scala to the path
export PATH=$SCALA_HOME/bin:$PATH
# where to find compiled man pages
export MANPATH=/usr/local/man:$MANPATH
